#define pii pair<int,int>
#define ll long long 
class Solution {
public:
    int minTime(int n, vector<vector<int>>& edges) {
        vector<vector<tuple<int,int,int>>>adj(n);
        for (auto &e : edges) {
            adj[e[0]].push_back({e[1], e[2], e[3]});
        }
        priority_queue<pii,vector<pii>,greater<pii>>pq;
        pq.push({0,0});
        vector<ll>dist(n,1e14);
        dist[0] = 0;
        while(!pq.empty()){
            ll t = pq.top().first;
            int node = pq.top().second;
            pq.pop();
            if(t>dist[node]) continue;
            if(node == n-1) return (int)t;
            for(auto it: adj[node]){
                ll ver = get<0>(it);
                ll st = get<1>(it);
                ll end = get<2>(it);
                if(t>end) continue;
                ll x = max(t+1,st+1);
                if(x-1<=end && x<=dist[ver]){
                    dist[ver] = x;
                    pq.push({x,ver});
                }
            }
        }
        return -1;
    }
};
